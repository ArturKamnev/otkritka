<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <!-- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–û—Ç–∫—Ä—ã—Ç–∫–∞</title>
  <style>
    /* ======= –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –∏ —Ñ–æ–Ω ======= */
    body {
      margin: 0;
      padding: 0;
      background-color: #fff8e1; /* –º–æ–ª–æ—á–Ω—ã–π —Ñ–æ–Ω */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: sans-serif;
      overflow: hidden; /* —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
      position: relative; /* –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
    }

    /* ======= –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–µ—Ä–¥—Ü–∞ =======
       –†–∞–∑–º–µ—Ä: –ª–∏–±–æ 600√ó600, –ª–∏–±–æ 80vw (–Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö)
    */
    #heart-container {
      position: relative;
      width: min(600px, 80vw);
      height: min(600px, 80vw);
      overflow: visible;
    }

    /* ======= –°–∞–º–æ —Å–µ—Ä–¥—Ü–µ (SVG) =======
       –ê–Ω–∏–º–∞—Ü–∏—è ¬´–±–∏–µ–Ω–∏—è¬ª (–ø—É–ª—å—Å)
    */
    #heart-svg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: visible;
      animation: beat 1s infinite;
    }
    @keyframes beat {
      0%, 100% { transform: scale(1); }
      50%      { transform: scale(1.1); }
    }

    /* ======= –ö–∞–∂–¥–∞—è –ø–æ–ª–æ–≤–∏–Ω–∫–∞ —Å–µ—Ä–¥—Ü–∞ ======= */
    #leftHalf, #rightHalf {
      transition: transform 1s;
      transform-origin: center;
      transform-box: fill-box;
    }

    /* ======= –¢–µ–∫—Å—Ç –Ω–∞ –∑–∞–∫—Ä—ã—Ç–æ–º —Å–µ—Ä–¥—Ü–µ ======= */
    #heart-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-32%, -85%);
      font-size: 4vw;
      color: white;
      text-shadow: 1px 1px 2px black;
      pointer-events: none;
      transition: opacity 0.5s;
      z-index: 3;
    }
    @media (min-width: 800px) {
      #heart-text {
        font-size: 64px;
      }
    }

    /* ======= –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ–º ======= */
    #message-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -54%);
      width: 80%;
      background-color: transparent;
      color: red;
      border-radius: 10px;
      display: none;
      padding: 20px;
      text-align: center;
      font-size: 3.5vw;
      line-height: 1.4;
      box-sizing: border-box;
      z-index: 2;
    }
    @media (min-width: 800px) {
      #message-container {
        font-size: 20px;
      }
    }

    /* ======= –ö–Ω–æ–ø–∫–∞ ¬´–û—Ç–∫—Ä—ã—Ç—å/–ó–∞–∫—Ä—ã—Ç—å¬ª ======= */
    #open-button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      z-index: 10;
    }

    /* ======= –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —Ñ—Ä–∞–∑—ã ======= */
    .floating-phrase {
      position: absolute;
      font-size: 3vw;
      color: #e60000;
      opacity: 0;
      transition: opacity 1s;
      pointer-events: none;
      z-index: -1;
      text-shadow: 1px 1px 2px white;
      /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏, —É–≥–æ–ª –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é --rotate */
      animation: phraseBeat 1s infinite;
    }
    @media (min-width: 800px) {
      .floating-phrase {
        font-size: 28px;
      }
    }

    /* ======= –í—Å–ø–ª—ã–≤–∞—é—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ ======= */
    .floating-picture {
      position: absolute;
      max-width: 200px; /* –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø–æ–±–æ–ª—å—à–µ */
      transition: opacity 1s;
      pointer-events: none;
      z-index: -1;
      /* –ü—É–ª—å—Å–∏—Ä—É–µ—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π --rotate */
      animation: phraseBeat 1s infinite;
      opacity: 0;
    }

    /* ======= –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ======= 
         –ò—Å–ø–æ–ª—å–∑—É–µ–º CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é --rotate –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–≥–ª–∞
    */
    @keyframes phraseBeat {
      0%, 100% {
        transform: rotate(var(--rotate)) scale(1);
      }
      50% {
        transform: rotate(var(--rotate)) scale(1.1);
      }
    }
  </style>
</head>
<body>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Å–µ—Ä–¥—Ü–µ–º -->
  <div id="heart-container">
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ–º -->
    <div id="message-container">
      <p>
        –ú–∞–º–æ—á–∫–∞, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è —Å –í–æ—Å—å–º—ã–º –º–∞—Ä—Ç–∞! üå∑<br>
        –°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ –∑–∞ –Ω–µ–∂–Ω–æ—Å—Ç—å, —Ç–µ–ø–ª–æ –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é –ª—é–±–æ–≤—å, –∫–æ—Ç–æ—Ä–æ–π —Ç—ã –Ω–∞–ø–æ–ª–Ω—è–µ—à—å –º–æ—ë —Å–µ—Ä–¥—Ü–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.
        –¢—ã ‚Äî –º–æ–π —Å–∞–º—ã–π —Å–≤–µ—Ç–ª—ã–π —á–µ–ª–æ–≤–µ–∫, –º–æ—è –æ–ø–æ—Ä–∞ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ.
        –ü—É—Å—Ç—å —Ç–≤–æ—è –∂–∏–∑–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ —É–ª—ã–±–∫–∞–º–∏, —Ä–∞–¥–æ—Å—Ç—å—é –∏ —Å—á–∞—Å—Ç—å–µ–º,
        –≤–µ–¥—å —Ç—ã —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–æ–π–Ω–∞ –∫–∞–∫ –Ω–∏–∫—Ç–æ –¥—Ä—É–≥–æ–π.
        –Ø —Ç–µ–±—è –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –ª—é–±–ª—é –∏ –±–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –≤—Å—ë, —á—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å –¥–ª—è –º–µ–Ω—è.
        –ë—É–¥—å –≤—Å–µ–≥–¥–∞ —Ç–∞–∫–æ–π –∂–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π, –ª—é–±–∏–º–æ–π –∏ —Å—á–∞—Å—Ç–ª–∏–≤–æ–π! ‚ù§Ô∏è‚ú®
      </p>
    </div>

    <!-- –¢–µ–∫—Å—Ç –Ω–∞ –∑–∞–∫—Ä—ã—Ç–æ–º —Å–µ—Ä–¥—Ü–µ -->
    <div id="heart-text">–° 8 –º–∞—Ä—Ç–∞, –ú–∞–º–∞!</div>

    <!-- SVG-—Å–µ—Ä–¥—Ü–µ –∏–∑ –¥–≤—É—Ö –ø–æ–ª–æ–≤–∏–Ω–æ–∫ -->
    <svg id="heart-svg" viewBox="0 0 100 100">
      <defs>
        <clipPath id="leftClip">
          <rect x="0" y="0" width="50" height="100"/>
        </clipPath>
        <clipPath id="rightClip">
          <rect x="50" y="0" width="50" height="100"/>
        </clipPath>
      </defs>
      <g id="leftHalf" clip-path="url(#leftClip)">
        <path d="M50,15 C20,0 0,30 50,70 C100,30 80,0 50,15 Z" fill="red"/>
      </g>
      <g id="rightHalf" clip-path="url(#rightClip)">
        <path d="M50,15 C20,0 0,30 50,70 C100,30 80,0 50,15 Z" fill="red"/>
      </g>
    </svg>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ ¬´–û—Ç–∫—Ä—ã—Ç—å/–ó–∞–∫—Ä—ã—Ç—å¬ª -->
  <button id="open-button">–û—Ç–∫—Ä—ã—Ç—å</button>

  <script>
    const openButton       = document.getElementById('open-button');
    const leftHalf         = document.getElementById('leftHalf');
    const rightHalf        = document.getElementById('rightHalf');
    const heartText        = document.getElementById('heart-text');
    const messageContainer = document.getElementById('message-container');

    let isAnimating = false; // –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–ª–∏–∫–∏ –≤–æ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏
    let isOpen = false;      // —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–¥—Ü–∞
    let pictureInterval = null; // –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫

    // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–µ—Ä–¥—Ü–∞
    function openHeart() {
      leftHalf.style.transform  = 'translateX(-37px)';
      rightHalf.style.transform = 'translateX(37px)';
      heartText.style.opacity = '0';
      messageContainer.style.display = 'block';
      // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–æ–∫ —Å—Ä–∞–∑—É –∏ –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
      spawnPicture();
      pictureInterval = setInterval(spawnPicture, 3000);
    }

    // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–µ—Ä–¥—Ü–∞
    function closeHeart() {
      leftHalf.style.transform  = 'translateX(0)';
      rightHalf.style.transform = 'translateX(0)';
      messageContainer.style.display = 'none';
      // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–∏–∫–ª –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫
      if(pictureInterval) {
        clearInterval(pictureInterval);
        pictureInterval = null;
      }
      setTimeout(() => {
        heartText.style.opacity = '1';
        isAnimating = false;
      }, 1000);
    }

    openButton.addEventListener('click', () => {
      if (isAnimating) return;
      isAnimating = true;
      if (isOpen) {
        closeHeart();
        isOpen = false;
        openButton.textContent = '–û—Ç–∫—Ä—ã—Ç—å';
      } else {
        openHeart();
        isOpen = true;
        setTimeout(() => { isAnimating = false; }, 1000);
        openButton.textContent = '–ó–∞–∫—Ä—ã—Ç—å';
      }
    });

    /* ================= –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —Ñ—Ä–∞–∑—ã ================= */
    const phrases = [
      "–õ—é–±–ª—é —Ç–µ–±—è!",
      "–õ—é–±–∏–º–∞—è –ú–∞–º–∞!",
      "–° –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º!"
    ];

    function scheduleNextPhrase() {
      const delay = 2000 + Math.random() * 1000;
      setTimeout(() => {
        spawnPhrase();
        scheduleNextPhrase();
      }, delay);
    }

    function spawnPhrase() {
      const text = phrases[Math.floor(Math.random() * phrases.length)];
      const phraseElem = document.createElement('div');
      phraseElem.className = 'floating-phrase';
      phraseElem.textContent = text;
      // –†–∞–Ω–¥–æ–º–Ω—ã–π —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ (–ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç 0 –¥–æ 360 –¥–ª—è —Ñ—Ä–∞–∑)
      const angle = Math.floor(Math.random() * 90);
      phraseElem.style.setProperty('--rotate', angle + 'deg');
      // –†–∞–Ω–¥–æ–º–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ:
      const maxX = window.innerWidth - 150;
      const maxY = window.innerHeight - 100;
      const x = Math.random() * maxX;
      const y = Math.random() * maxY;
      phraseElem.style.left = x + 'px';
      phraseElem.style.top = y + 'px';
      document.body.appendChild(phraseElem);
      requestAnimationFrame(() => {
        phraseElem.style.opacity = '1';
      });
      setTimeout(() => {
        phraseElem.style.opacity = '0';
        setTimeout(() => { phraseElem.remove(); }, 1000);
      }, 2000);
    }

    scheduleNextPhrase();

    /* ================= –í—Å–ø–ª—ã–≤–∞—é—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ ================= */
    function spawnPicture() {
      // –ó–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ –Ω—É–∂–Ω—É—é –≤–∞–º –∫–∞—Ä—Ç–∏–Ω–∫—É
      const imageURL = 'https://cs14.pikabu.ru/post_img/2023/10/05/5/1696491958117834870.jpg';
      const imgElem = document.createElement('img');
      imgElem.src = imageURL;
      imgElem.className = 'floating-picture';
      // –í—ã—á–∏—Å–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —É–≥–æ–ª –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç -45¬∞ –¥–æ 45¬∞
      const angle = -45 + Math.random() * 90;
      imgElem.style.setProperty('--rotate', angle + 'deg');
      // –†–∞–Ω–¥–æ–º–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ (—É—á–∏—Ç—ã–≤–∞—è —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç–∏–Ω–∫–∏)
      const maxX = window.innerWidth - 250;
      const maxY = window.innerHeight - 250;
      const x = Math.random() * maxX;
      const y = Math.random() * maxY;
      imgElem.style.left = x + 'px';
      imgElem.style.top = y + 'px';
      document.body.appendChild(imgElem);
      requestAnimationFrame(() => {
        imgElem.style.opacity = '1';
      });
      setTimeout(() => {
        imgElem.style.opacity = '0';
        setTimeout(() => { imgElem.remove(); }, 1000);
      }, 2000);
    }
  </script>
</body>
</html>
